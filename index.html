<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Valentine‚Äôs Dice Offer</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

<style>
html, body {margin:0;padding:0;height:100%;font-family:'Poppins', sans-serif;}
body {
  display:flex;flex-direction:column;justify-content:flex-start;align-items:center;
  background: linear-gradient(135deg,#ff6b81,#feca57);
  color:#fff;text-align:center;overflow-x:hidden;
}

h1 {margin:10px 0;font-size:2.5em;text-shadow: 2px 2px 5px #ff385c;}
.container {width:95%;max-width:1200px;flex:1;display:flex;flex-direction:column;align-items:center;}

.card {
  background: linear-gradient(145deg, #fff, #ffe6e6);
  color:#333;
  border-radius:20px;
  padding:25px;
  margin:20px 0;
  width:100%;
  box-shadow: 0 10px 25px rgba(0,0,0,0.2);
  transition: transform 0.3s;
}
.card:hover {transform: translateY(-5px) scale(1.02);}

input {
  padding:18px;font-size:18px;border-radius:12px;border:1px solid #ccc;
  margin:10px 5px;width:250px;max-width:90%;box-sizing:border-box;
  text-align:center;
}
button {
  background: #ff4d6d;
  color: #fff;
  border:none;
  padding:18px 45px;
  font-size:18px;
  border-radius:12px;
  cursor:pointer;
  margin-top:10px;
  box-shadow: 0 6px 15px rgba(0,0,0,0.3);
  transition: 0.3s;
}
button:hover {transform: translateY(-3px) scale(1.05); box-shadow: 0 8px 20px rgba(0,0,0,0.4);}
button:disabled {background:#aaa; cursor:not-allowed; box-shadow:none;}

.scene {
  perspective:1000px;height:250px;display:flex;justify-content:center;align-items:center;margin:20px 0;
}
.cube {
  width:120px;height:120px;position:relative;transform-style:preserve-3d;
  transform: rotateX(-20deg) rotateY(20deg);
  transition: transform 1s ease-out;
}
.face {
  position:absolute;width:120px;height:120px;background:#ffb6b9;
  border-radius:15px;border:2px solid #ff6b81;
  display:flex;align-items:center;justify-content:center;
  font-size:60px;font-weight:bold;color:#fff;
  text-shadow:2px 2px 5px #ff385c;
  box-shadow: inset 0 5px 15px rgba(255,255,255,0.3),
              0 5px 15px rgba(0,0,0,0.2);
}
.face1 {transform:rotateX(0deg) translateZ(60px);}
.face2 {transform:rotateX(180deg) translateZ(60px);}
.face3 {transform:rotateY(90deg) translateZ(60px);}
.face4 {transform:rotateY(-90deg) translateZ(60px);}
.face5 {transform:rotateX(90deg) translateZ(60px);}
.face6 {transform:rotateX(-90deg) translateZ(60px);}

.roll {animation:fastRoll 2s ease-in-out;}
@keyframes fastRoll {
  0%{transform:translateY(0) rotateX(0) rotateY(0);}
  20%{transform:translateY(-80px) rotateX(360deg) rotateY(360deg);}
  40%{transform:translateY(0) rotateX(720deg) rotateY(720deg);}
  60%{transform:translateY(-50px) rotateX(1080deg) rotateY(1080deg);}
  80%{transform:translateY(0) rotateX(1440deg) rotateY(1440deg);}
  100%{transform:translateY(0) rotateX(1800deg) rotateY(1800deg);}
}

.resultCard {
  margin-top:15px;font-size:20px;font-weight:bold;word-wrap:break-word;
  background: linear-gradient(135deg,#ff9a9e,#fad0c4);
  color:#333;padding:18px;border-radius:15px;
  display:inline-block;line-height:1.4;
  box-shadow: 0 8px 20px rgba(0,0,0,0.25);
}

@media(max-width:700px){
  .cube{width:100px;height:100px;}
  .face{width:100px;height:100px;font-size:50px;}
  input{width:80%;font-size:16px;}
  button{padding:14px 35px;font-size:16px;}
}
</style>
</head>
<body>

<h1>üé≤ Student Dice Roll üé≤</h1>

<div class="container">

<div class="card">
<h3>üìä Discount Chart (Numbers Only)</h3>
<div style="overflow-x:auto;">
<table>
<tr><th>Serial</th><th>Item Code</th><th>Discount</th></tr>
<tr><td>1</td><td>101</td><td>10%</td></tr>
<tr><td>2</td><td>102</td><td>15%</td></tr>
<tr><td>3</td><td>103</td><td>20%</td></tr>
<tr><td>4</td><td>104</td><td>50%</td></tr>
<tr><td>5</td><td>105</td><td>25%</td></tr>
<tr><td>6</td><td>106</td><td>30%</td></tr>
</table>
</div>
</div>

<div class="card">
<h3>üî¢ Enter Your Student ID</h3>
<input type="text" id="studentID" placeholder="Student ID (Numbers only)" 
       oninput="this.value = this.value.replace(/[^0-9]/g,'')"><br>
<button id="btn" onclick="rollDice()" disabled>ROLL DICE üé≤</button>
</div>

<div class="card">
<h3>üé≤ Dice Roll</h3>
<div class="scene">
<div class="cube" id="cube">
<div class="face face1">1</div>
<div class="face face2">2</div>
<div class="face face3">3</div>
<div class="face face4">4</div>
<div class="face face5">5</div>
<div class="face face6">6</div>
</div>
</div>
<div class="resultCard" id="resultCard" style="display:none;"></div>
<button id="downloadBtn" style="display:none;margin-top:10px;" onclick="downloadResult()">üíæ Download Result</button>
</div>

</div>

<script>
const diceRotations = {
1: "rotateX(0deg) rotateY(0deg)",
2: "rotateX(180deg) rotateY(0deg)",
3: "rotateX(0deg) rotateY(-90deg)",
4: "rotateX(0deg) rotateY(90deg)",
5: "rotateX(-90deg) rotateY(0deg)",
6: "rotateX(90deg) rotateY(0deg)"
};

const offers = {
1: "10% OFF on Item 101",
2: "15% OFF on Item 102",
3: "20% OFF on Item 103",
4: "50% OFF on Item 104",
5: "25% OFF on Item 105",
6: "30% OFF on Item 106"
};

const idInput = document.getElementById("studentID");
const shakeBtn = document.getElementById("btn");
const resultCard = document.getElementById("resultCard");
const downloadBtn = document.getElementById("downloadBtn");

// Enable Shake button only if input filled
idInput.addEventListener("input", () => {
    shakeBtn.disabled = !(idInput.value.trim());
});

// Check if student already rolled
function checkStudent() {
    const key = "rolled_" + idInput.value.trim();
    if(localStorage.getItem(key)) {
        shakeBtn.disabled = true;
        idInput.disabled = true;
        resultCard.style.display = "block";
        resultCard.innerHTML = "‚úÖ Already rolled!";
        downloadBtn.style.display="none";
    }
}
idInput.addEventListener("blur", checkStudent);

// Roll dice
function rollDice() {
    const studentKey = "rolled_" + idInput.value.trim();
    if(localStorage.getItem(studentKey)) {
        alert("Already rolled! üé≤");
        shakeBtn.disabled = true;
        return;
    }
    localStorage.setItem(studentKey,"true");
    shakeBtn.disabled = true;
    idInput.disabled = true;

    const cube = document.getElementById("cube");
    cube.classList.add("roll");

    let interval = setInterval(()=>{
        let temp=Math.floor(Math.random()*6)+1;
        cube.style.transform=diceRotations[temp];
    },100);

    setTimeout(()=>{
        clearInterval(interval);
        cube.classList.remove("roll");

        const final=Math.floor(Math.random()*6)+1;
        cube.style.transform=diceRotations[final];

        resultCard.style.display = "block";
        resultCard.innerHTML = `
        üéâ ID: ${idInput.value}<br>
        üé≤ Dice Result: ${final}<br>
        üè∑ Offer: ${offers[final]}<br>
        üéä Congrats!<br>
        üìå Click "Download Result" to save.
        `;
        downloadBtn.style.display = "inline-block";
    },2500);
}

// Download result as image
function downloadResult() {
    html2canvas(resultCard).then(canvas=>{
        const link = document.createElement("a");
        link.download = `${idInput.value}_offer.png`;
        link.href = canvas.toDataURL();
        link.click();
        downloadBtn.style.display="none";
    });
}
</script>

</body>
</html>
