<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>FIRST WAVE FRIES - Valentineâ€™s Dice Offer</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

<style>
html, body {margin:0;padding:0;height:100%;font-family:Arial,sans-serif;}
body {
  display:flex;
  flex-direction:column;
  justify-content:flex-start;
  align-items:center;
  background:linear-gradient(135deg,#ff4d6d,#ff9a9e);
  color:#fff;
  text-align:center;
  overflow-x:hidden;
  position:relative;
}

/* Valentine Decorations */
body::before {
  content:"â¤ï¸ğŸ’ŒğŸ’•ğŸŒ¹ğŸ’–ğŸ’˜ğŸ’";
  position:absolute;
  top:0;
  left:0;
  width:100%;
  font-size:30px;
  text-align:center;
  animation:scrollHearts 10s linear infinite;
  pointer-events:none;
  user-select:none;
}
@keyframes scrollHearts {
  0% {transform:translateY(-50px);}
  100% {transform:translateY(100vh);}
}

h1 {margin:10px 0;font-size:2.2em;}
h2 {margin:5px 0;font-weight:normal;font-size:1.2em;}
.container {width:95%;max-width:1200px;flex:1;display:flex;flex-direction:column;align-items:center;position:relative;z-index:1;}
.card {background:#fff;color:#333;border-radius:16px;padding:20px;margin:15px 0;width:100%;box-sizing:border-box;position:relative;}
table {width:100%;border-collapse:collapse;margin-top:10px;font-size:1em;}
th,td {border:1px solid #ddd;padding:10px;}
th {background:#ff4d6d;color:#fff;}
.scene {perspective:900px;height:250px;display:flex;justify-content:center;align-items:center;margin:20px 0;}
.cube {width:120px;height:120px;position:relative;transform-style:preserve-3d;transform:rotateX(-20deg) rotateY(20deg);}
.face {position:absolute;width:120px;height:120px;background:white;border-radius:12px;border:2px solid #eee;display:flex;align-items:center;justify-content:center;font-size:60px;font-weight:bold;color:#ff4d6d;}
.face1 {transform:rotateX(0deg) translateZ(60px);}
.face2 {transform:rotateX(180deg) translateZ(60px);}
.face3 {transform:rotateY(90deg) translateZ(60px);}
.face4 {transform:rotateY(-90deg) translateZ(60px);}
.face5 {transform:rotateX(90deg) translateZ(60px);}
.face6 {transform:rotateX(-90deg) translateZ(60px);}
.roll {animation:fastRoll 2s ease-in-out;}
@keyframes fastRoll {0%{transform:translateY(0) rotateX(0) rotateY(0);}20%{transform:translateY(-80px) rotateX(360deg) rotateY(360deg);}40%{transform:translateY(0) rotateX(720deg) rotateY(720deg);}60%{transform:translateY(-50px) rotateX(1080deg) rotateY(1080deg);}80%{transform:translateY(0) rotateX(1440deg) rotateY(1440deg);}100%{transform:translateY(0) rotateX(1800deg) rotateY(1800deg);}}

input {padding:15px;font-size:18px;border-radius:10px;border:1px solid #ccc;margin:10px 5px;width:250px;max-width:90%;box-sizing:border-box;}
button {background:#ff4d6d;color:#fff;border:none;padding:15px 40px;font-size:18px;border-radius:10px;cursor:pointer;margin-top:10px;}
button:disabled {background:#aaa;}
.resultCard {margin-top:15px;font-size:20px;font-weight:bold;word-wrap:break-word;background:#ffe6e6;color:#333;padding:15px;border-radius:12px;display:inline-block;line-height:1.4;position:relative;}
/* Small heart animations inside cards */
.resultCard::before {
  content:"ğŸ’–ğŸ’˜ğŸ’";
  position:absolute;
  top:-20px;
  right:-20px;
  font-size:20px;
  animation:spinHearts 2s linear infinite;
}
@keyframes spinHearts {
  0%{transform:rotate(0deg);}
  100%{transform:rotate(360deg);}
}

@media(max-width:700px){.cube{width:100px;height:100px;}.face{width:100px;height:100px;font-size:50px;}input{width:80%;font-size:16px;}button{padding:12px 30px;font-size:16px;}table th,table td{font-size:0.85em;padding:6px;}}
</style>
</head>
<body>

<h1>â¤ï¸ STUDENTS - Valentineâ€™s Month Special â¤ï¸</h1>
<h2>FIRST WAVE FRIES</h2>

<div class="container">

<div class="card">
<h3>ğŸ Discount Chart</h3>
<div style="overflow-x:auto;">
<table>
<tr><th>Dice Number</th><th>Item</th><th>Discount</th></tr>
<tr><td>1</td><td>Burgers</td><td>10% OFF</td></tr>
<tr><td>2</td><td>Rolls</td><td>15% OFF</td></tr>
<tr><td>3</td><td>French Fries</td><td>20% OFF</td></tr>
<tr><td>4</td><td>Ice Creams</td><td>Buy 1 Get 1 Free</td></tr>
<tr><td>5</td><td>Milkshakes</td><td>25% OFF</td></tr>
<tr><td>6</td><td>Vada Pav / Chocolate Bun</td><td>â‚¹30 OFF</td></tr>
</table>
</div>
</div>

<div class="card">
<h3>ğŸ“ Enter Your Details</h3>
<input type="text" id="studentName" placeholder="Your Name">
<input type="text" id="studentID" placeholder="Student ID"><br>
<button id="btn" onclick="rollDice()" disabled>SHAKE DICE ğŸ²</button>
</div>

<div class="card">
<h3>ğŸ² Dice Roll</h3>
<div class="scene">
<div class="cube" id="cube">
<div class="face face1">1</div>
<div class="face face2">2</div>
<div class="face face3">3</div>
<div class="face face4">4</div>
<div class="face face5">5</div>
<div class="face face6">6</div>
</div>
</div>
<div class="resultCard" id="resultCard" style="display:none;"></div>
<button id="downloadBtn" style="display:none;margin-top:10px;" onclick="downloadResult()">ğŸ’¾ Download Result</button>
</div>

</div>

<script>
// Dice rotations
const diceRotations = {
1: "rotateX(0deg) rotateY(0deg)",
2: "rotateX(180deg) rotateY(0deg)",
3: "rotateX(0deg) rotateY(-90deg)",
4: "rotateX(0deg) rotateY(90deg)",
5: "rotateX(-90deg) rotateY(0deg)",
6: "rotateX(90deg) rotateY(0deg)"
};

// Offers
const offers = {
1: "10% OFF on Burgers ğŸ”",
2: "15% OFF on Rolls ğŸŒ¯",
3: "20% OFF on French Fries ğŸŸ",
4: "Buy 1 Get 1 Free on Ice Creams ğŸ¨",
5: "25% OFF on Milkshakes ğŸ¥¤",
6: "â‚¹30 OFF on Vada Pav / Chocolate Bun ğŸ«"
};

const nameInput = document.getElementById("studentName");
const idInput = document.getElementById("studentID");
const shakeBtn = document.getElementById("btn");
const resultCard = document.getElementById("resultCard");
const downloadBtn = document.getElementById("downloadBtn");

// Enable Shake button only if inputs are filled
function validateInputs() {
    shakeBtn.disabled = !(nameInput.value.trim() && idInput.value.trim());
}
[nameInput, idInput].forEach(input => input.addEventListener("input", validateInputs));

// Check if student already rolled
function checkStudent() {
    const key = "rolled_" + nameInput.value.trim() + "_" + idInput.value.trim();
    if(localStorage.getItem(key)) {
        shakeBtn.disabled = true;
        nameInput.disabled = true;
        idInput.disabled = true;
        resultCard.style.display = "block";
        resultCard.innerHTML = "âœ… You have already rolled the dice!";
        downloadBtn.style.display="none";
    }
}
nameInput.addEventListener("blur", checkStudent);
idInput.addEventListener("blur", checkStudent);

// Roll dice
function rollDice() {
    const studentKey = "rolled_" + nameInput.value.trim() + "_" + idInput.value.trim();
    if(localStorage.getItem(studentKey)) {
        alert("You already rolled! ğŸ²");
        shakeBtn.disabled = true;
        return;
    }

    localStorage.setItem(studentKey,"true");
    shakeBtn.disabled = true;
    nameInput.disabled = true;
    idInput.disabled = true;

    const cube = document.getElementById("cube");
    cube.classList.add("roll");

    let interval = setInterval(()=>{
        let temp=Math.floor(Math.random()*6)+1;
        cube.style.transform=diceRotations[temp];
    },100);

    setTimeout(()=>{
        clearInterval(interval);
        cube.classList.remove("roll");

        const final=Math.floor(Math.random()*6)+1;
        cube.style.transform=diceRotations[final];

        resultCard.style.display = "block";
        resultCard.innerHTML = `
        ğŸ‰ Name: ${nameInput.value}<br>
        ğŸ‰ ID: ${idInput.value}<br>
        ğŸ² Dice Result: ${final}<br>
        ğŸ· Offer: ${offers[final]}<br>
        ğŸŠ Congratulations!<br>
        ğŸ“Œ Click "Download Result" to save your offer.
        `;

        downloadBtn.style.display = "inline-block";
    },2500);
}

// Download result as image
function downloadResult() {
    resultCard.innerHTML += ` <br> <br>ğŸ“ Please visit FIRST WAVE FRIES, M.N COMPLEX, JNANABHARATHI MAIN ROAD, NAGARBHAVI CIRCLE and show this and varify your Name and Id at counter before billing.`;

    html2canvas(resultCard).then(canvas=>{
        const link = document.createElement("a");
        link.download = `${nameInput.value}_${idInput.value}_offer.png`;
        link.href = canvas.toDataURL();
        link.click();
        downloadBtn.style.display="none";
    });
}
</script>

</body>
</html>
